<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Compare | CPU ìŠ¤ì¼€ì¤„ë§ - OS Platform</title>
  <style>
    :root{
      --bg:#000;--bg-2:#0a0a0a;--panel:#111;--panel-2:#131313;--line:#222;
      --text:#fff;--muted:#b9c2cc;--accent:#00bfff;--btn:#0078ff;--btn-hover:#005ec9;
      --good:#0ecb81;--warn:#ffcc00;--bad:#ff5c5c;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Arial,system-ui,-apple-system,sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    /* header â€“ Learn í˜ì´ì§€ì™€ ë™ì¼í•œ ë“œë¡­ë‹¤ìš´ ìŠ¤íƒ€ì¼ */
    header{
      position:sticky;top:0;z-index:20;
      display:flex;justify-content:space-between;align-items:center;
      padding:20px 60px;background:var(--bg-2);border-bottom:1px solid var(--line)
    }
    .logo{
    display:flex;
    align-items:center;
    gap:8px;
    text-decoration:none;   /* ë°‘ì¤„ ì œê±° */
    }

    /* ê¸€ì ìŠ¤íƒ€ì¼ (í•­ìƒ í•˜ì–€ìƒ‰) */
    .logo-text{
        font-size:1.4em;
        font-weight:700;
        color:#ffffff;          /* â† ë¬´ì¡°ê±´ í°ìƒ‰ìœ¼ë¡œ í†µì¼ */
    }

    /* ì•„ì´ì½˜ í¬ê¸° */
    .logo-icon{
        width:26px;
        height:26px;
        flex-shrink:0;
    }

    nav{display:flex;align-items:center;gap:150px}
    .dropdown{position:relative;display:inline-block;padding:6px 0;cursor:pointer}
    .dropdown::after{
      content:" âŒ„";display:inline-block;font-size:.8em;color:#ccc;
      transition:transform .25s ease,color .25s ease
    }
    .dropdown:hover::after{transform:rotate(180deg);color:var(--accent)}
    .dropdown-content{
      display:none;position:absolute;background:#111;min-width:180px;
      box-shadow:0 8px 16px rgba(0,0,0,.3);z-index:10
    }
    .dropdown-content a{
      color:#fff;padding:10px 14px;text-decoration:none;display:block
    }
    .dropdown-content a:hover{background:#333}
    .dropdown:hover .dropdown-content{display:block}
    .dropdown > span > a{color:#fff;text-decoration:none}
    .actions{display:flex;align-items:center;gap:20px}
    #authArea{}
    .profile-btn{
      background:transparent;
      border:none;
      padding:0;
      cursor:pointer;
      line-height:0;
      border-radius:999px;
      outline:none;
    }
    .profile-btn svg{
      width:36px;
      height:36px;
      background:#fff;
      border-radius:999px;
      padding:4px;
    }
    .profile-btn:hover svg{
      box-shadow:0 0 0 3px rgba(0,191,255,.25);
    }


    @media (max-width:880px){
      header{padding:16px 20px;flex-wrap:wrap;gap:12px}
      nav{gap:40px}
    }

    /* ë³¸ë¬¸ ë ˆì´ì•„ì›ƒ */
    main{max-width:1120px;margin:0 auto;padding:26px 20px 60px}

    h1{font-size:1.8rem;margin:4px 0 8px}
    .subtitle{color:var(--muted);font-size:.95rem;margin-bottom:20px}

    .pill-row{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:18px}
    .pill{
      border-radius:999px;border:1px solid var(--line);
      padding:4px 10px;font-size:.8rem;color:var(--muted);
      display:inline-flex;align-items:center;gap:4px;
    }
    .pill span.dot{
      width:7px;height:7px;border-radius:50%;background:var(--accent);
    }

    .panel{
      background:linear-gradient(180deg,var(--panel) 0%,var(--panel-2) 100%);
      border:1px solid var(--line);
      border-radius:16px;
      padding:18px 20px 18px;
      margin-bottom:18px;
    }
    .panel h2{
      font-size:1.15rem;
      margin:0 0 6px;
    }
    .panel .sub{
      font-size:.9rem;color:var(--muted);margin:0 0 12px;
    }

    /* ìƒë‹¨ ê³ ì • ë¹„êµí‘œ */
    .alg-table{
      width:100%;
      border-collapse:collapse;
      font-size:.9rem;
    }
    .alg-table thead{
      background:rgba(255,255,255,.02);
    }
    .alg-table th,
    .alg-table td{
      border:1px solid var(--line);
      padding:8px 10px;
      vertical-align:top;
    }
    .alg-table th{
      text-align:left;
      font-size:.85rem;
      color:#dbe9f5;
    }
    .alg-col-name{
      font-weight:600;
      color:#e6f7ff;
      white-space:nowrap;
    }
    .tag{
      display:inline-flex;
      align-items:center;
      padding:2px 8px;
      border-radius:999px;
      font-size:.75rem;
      border:1px solid var(--line);
      color:var(--muted);
      margin-right:4px;
      margin-bottom:3px;
    }
    .tag.preempt{border-color:var(--accent);color:var(--accent)}
    .tag.nonpreempt{border-color:#888;color:#cdd6e0}
    .tag-good{color:var(--good)}
    .tag-warn{color:var(--warn)}
    .tag-bad{color:var(--bad)}

    /* í•˜ë‹¨ ì§ì ‘ ë¹„êµ ì˜ì—­ */
    .section-title{
      margin:26px 0 8px;
      font-size:1.25rem;
    }
    .section-desc{
      margin:0 0 14px;
      font-size:.92rem;
      color:var(--muted);
    }

    .scenario-row{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:16px;
      margin-bottom:10px;
      flex-wrap:wrap;
    }
    .scenario-row-left{display:flex;align-items:center;gap:10px;font-size:.9rem;color:var(--muted)}
    select{
      background:#050506;
      color:var(--text);
      border-radius:10px;
      border:1px solid var(--line);
      padding:6px 10px;
      font-size:.88rem;
      min-width:130px;
    }

    .compare-grid{
      display:grid;
      grid-template-columns:repeat(2,1fr);
      gap:16px;
      margin-top:6px;
    }
    .compare-card{
      background:linear-gradient(180deg,#0e0e0e 0%,#101018 100%);
      border-radius:16px;
      border:1px solid var(--line);
      padding:14px 16px 16px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .compare-header{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
    }
    .compare-title{
      font-size:.95rem;
      font-weight:600;
    }
    .compare-meta{
      font-size:.8rem;color:var(--muted);
    }
    .mini-label{font-size:.78rem;color:var(--muted);margin-bottom:3px}

    .metric-table{
      width:100%;
      border-collapse:collapse;
      font-size:.83rem;
      margin-top:2px;
    }
    .metric-table th,
    .metric-table td{
      border:1px solid var(--line);
      padding:5px 6px;
    }
    .metric-table th{
      text-align:left;
      color:#dbe9f5;
      width:40%;
    }
    .metric-table td.placeholder{
      color:#6f7b88;
      font-style:italic;
    }

    .gantt-box{
      border-radius:10px;
      border:1px dashed var(--line);
      padding:10px;
      font-size:.8rem;
      color:#778495;
      text-align:center;
    }

    .compare-note{
      margin-top:12px;
      font-size:.84rem;
      color:var(--muted);
      border-top:1px dashed var(--line);
      padding-top:10px;
    }

    .comment-panel{
      margin-top:14px;
      padding:10px 12px;
      border-radius:10px;
      border:1px dashed var(--line);
      font-size:.86rem;
      color:var(--muted);
    }
    .comment-panel span{
      color:var(--accent);
    }

    .btn-row{
      display:flex;
      gap:8px;
      margin-top:10px;
      justify-content:flex-end;
    }
    .btn{
      border:none;
      border-radius:999px;
      padding:8px 16px;
      font-size:.9rem;
      cursor:pointer;
      background:var(--btn);
      color:#fff;
    }
    .btn:hover{
      background:var(--btn-hover);
    }

    @media(max-width:900px){
      main{padding:22px 16px 50px}
      .compare-grid{grid-template-columns:1fr}
    }

    /* ---- ë¯¸ë‹ˆ Gantt Bar ---- */
    .mini-gantt {
      display: flex;
      align-items: center;
      gap: 4px;
      margin-top: 6px;
    }

    .mini-gantt-bar {
      height: 12px;            /* ì¶•ì†Œí˜• */
      border-radius: 6px;
      position: relative;
      background: var(--line);
      flex-shrink: 0;
    }

    .mini-gantt-bar span {
      position: absolute;
      top: -18px;
      left: 0;
      font-size: 0.73rem;
      color: #cdd6e0; /* ê¸°ì¡´ í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ê³¼ ë™ì¼ */
      white-space: nowrap;
    }

  </style>
</head>
<body>
<header>
  <a href="/index.html" class="logo">
    <svg class="logo-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <circle cx="12" cy="12" r="10" stroke="#00bfff" stroke-width="2" fill="none" />
      <path d="M2 12h20M12 2c3.5 4 3.5 16 0 20M12 2c-3.5 4-3.5 16 0 20"
            stroke="#00bfff" stroke-width="2" fill="none"/>
    </svg>
    <span class="logo-text">OS Platform</span>
  </a>



  <nav>
    <!-- Learn -->
    <div class="dropdown">
      <span>Learn</span>
      <div class="dropdown-content">
        <a href="/learn-scheduling.html">CPU Scheduling</a>
        <a href="/learn-paging.html">Page Replacement</a>
        <a href="/learn-deadlock.html">Deadlock</a>
      </div>
    </div>

    <!-- Simulator -->
    <div class="dropdown">
      <span>Simulator</span>
      <div class="dropdown-content">
        <a href="/sim-scheduling.html">CPU Scheduling Simulator</a>
        <a href="/sim-paging.html">Page Replacement Simulator</a>
      </div>
    </div>

    <!-- Compare -->
    <div class="dropdown">
      <span>Compare</span>
      <div class="dropdown-content">
        <a href="/compare-scheduling.html">Scheduling Algorithms Compare</a>
        <a href="/compare-paging.html">Paging Algorithms Compare</a>
      </div>
    </div>
  </nav>

  <div class="actions">
    <div id="authArea"></div>
  </div>
</header>

<main>
  <h1>CPU Scheduling Algorithm Compare</h1>
  <p class="subtitle">
    ì•Œê³ ë¦¬ì¦˜ 4ê°œë¥¼ í•œëˆˆì— ë¹„êµí•´ì„œ ë³´ê±°ë‚˜,<br />
    ì›í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì•Œê³ ë¦¬ì¦˜ ê²°ê³¼ë¥¼ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <!-- ìƒë‹¨ ê³ ì • ë¹„êµí‘œ -->
  <section class="panel">
    <h2>ì•Œê³ ë¦¬ì¦˜ í•œëˆˆì— ë³´ê¸°</h2>
    <p class="sub">
      ì…ë ¥ ì‹œë‚˜ë¦¬ì˜¤ì™€ ìƒê´€ì—†ì´ ë³€í•˜ì§€ ì•ŠëŠ” ì•Œê³ ë¦¬ì¦˜ 4ê°€ì§€ í•µì‹¬ ì°¨ì´
    </p>

    <table class="alg-table">
      <thead>
      <tr>
        <th style="width:110px">Algorithm</th>
        <th style="width:110px">Preemptive ì—¬ë¶€</th>
        <th>ìŠ¤ì¼€ì¤„ë§ ê¸°ì¤€</th>
        <th>ìš”êµ¬ ì •ë³´</th>
        <th>ì¥ì </th>
        <th>ë‹¨ì  / ê¸°ì•„ ìœ„í—˜</th>
      </tr>
      </thead>
      <tbody>
      <tr>
        <td class="alg-col-name">FCFS</td>
        <td>
          <span class="tag nonpreempt">Non-preemptive</span>
        </td>
        <td>
          ë„ì°© ìˆœì„œëŒ€ë¡œ CPUë¥¼ ë°°ë¶„í•˜ëŠ” ë°©ì‹
        </td>
        <td>
          <span class="tag">ë„ì°© ì‹œê°„(Arrival)</span>
        </td>
        <td>
          êµ¬í˜„ì´ ë§¤ìš° ë‹¨ìˆœí•˜ë©°, ë„ì°© ìˆœì„œ ê¸°ë°˜ì´ë¼ <span class="tag-good">ê¸°ì•„(starvation)ê°€ ë°œìƒí•˜ì§€ ì•ŠìŒ.</span>
        </td>
        <td>
          ê¸´ ì‘ì—…ì´ ì•ì— ìˆìœ¼ë©´ ì „ì²´ ì‘ë‹µì„±ì´ í¬ê²Œ ì €í•˜ë˜ë©°,
          ì§§ì€ ì‘ì—…ì´ ë’¤ë¡œ ë°€ë¦¬ëŠ” <span class="tag-warn">Convoy effect</span>ê°€ ë°œìƒ
        </td>
      </tr>

      <tr>
        <td class="alg-col-name">SJF</td>
        <td>
          <span class="tag nonpreempt">Non-preemptive</span>
        </td>
        <td>
          ì˜ˆìƒ CPU Burst Timeì´ ê°€ì¥ ì§§ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ìš°ì„  ì‹¤í–‰í•˜ëŠ” ë°©ì‹
        </td>
        <td>
          <span class="tag">CPU burst ê¸¸ì´ ì¶”ì •</span>
        </td>
        <td>
          ì´ë¡ ì ìœ¼ë¡œ í‰ê·  ëŒ€ê¸°ì‹œê°„, í‰ê·  ë°˜í™˜ì‹œê°„ì´ ë§¤ìš° ìš°ìˆ˜í•˜ë©°,
          ì§§ì€ ì‘ì—…ì´ ë¹ ë¥´ê²Œ ì²˜ë¦¬ë˜ì–´ <span class="tag-good">ì¼ë°˜ì ì¸ ì²´ê° ì„±ëŠ¥ì´ ì¢‹ìŒ</span>.
        </td>
        <td>
          ê¸´ ì‘ì—…ì€ ê³„ì† ë°€ë ¤ <span class="tag-warn">ê¸°ì•„ ê°€ëŠ¥ì„±</span>ì´ ìˆìœ¼ë©°,<br/>
          ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œëŠ” burst ì‹œê°„ì„ ì •í™•íˆ ì•Œê¸° ì–´ë ¤ì›€(ì¶”ì • í•„ìš”)
        </td>
      </tr>

      <tr>
        <td class="alg-col-name">Priority</td>
        <td>
          <span class="tag nonpreempt">Non-preemptive</span>
          <span class="tag preempt" style="margin-top:3px">Preemptive ë²„ì „ë„ ì¡´ì¬</span>
        </td>
        <td>
          ê° í”„ë¡œì„¸ìŠ¤ì— ë¶€ì—¬ëœ ìš°ì„ ìˆœìœ„ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ CPUë¥¼ ë°°ë¶„
        </td>
        <td>
          <span class="tag">Priority ê°’</span>
          <span class="tag">ì„ ì  ì—¬ë¶€ ì„¤ì •</span>
        </td>
        <td>
          ì¤‘ìš”í•œ ì‘ì—…ì— ìš°ì„ ìˆœìœ„ë¥¼ ë°°ë¶„í•˜ì—¬ <span class="tag-good">CPU ë°°ë¶„ ì œì–´ë ¥ì´ í¬ë©°, </span>
          ì‹œìŠ¤í…œ ì •ì±…ì— ë”°ë¼ ìš°ì„ ìˆœìœ„ë¥¼ ììœ ë¡­ê²Œ ì¡°ì • ê°€ëŠ¥
        </td>
        <td>
          ë‚®ì€ ìš°ì„ ìˆœìœ„ í”„ë¡œì„¸ìŠ¤ëŠ” ì¥ê¸°ê°„ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” <span class="tag-bad">ì‹¬ê°í•œ ê¸°ì•„ í˜„ìƒì´ ë°œìƒí•˜ë©°,</span>
          ê¸°ì•„ ë°©ì§€ë¥¼ ìœ„í•´ ì—ì´ì§•ê³¼ ê°™ì€ ë³´ì™„ ê¸°ë²•ì´ í•„ìš”
        </td>
      </tr>

      <tr>
        <td class="alg-col-name">Round Robin</td>
        <td>
          <span class="tag preempt">Preemptive</span>
        </td>
        <td>
          ì •í•´ì§„ Time Quantumë§Œí¼ ëŒì•„ê°€ë©° CPUë¥¼ ë‚˜ëˆ ì“°ëŠ” ë°©ì‹
        </td>
        <td>
          <span class="tag">Time Quantum ê°’</span>
        </td>
        <td>
          Time Quantum ë•ë¶„ì— <span class="tag-good">ì‘ë‹µì„±</span>ì´ ì¢‹ìœ¼ë©°, ì¸í„°ë™í‹°ë¸Œ ì‹œìŠ¤í…œì— ì í•©
          ë˜í•œ, ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ CPUë¥¼ ì¡°ê¸ˆì”© ê°€ì ¸ê°€ëŠ” ê³µì •í•œ êµ¬ì¡°
        </td>
        <td>
          Quantumì´ ë„ˆë¬´ ì§§ì„ ë• <span class="tag-warn">Context Switching ë¹„ìš©ì´ ì¦ê°€</span>í•˜ê³ , ë„ˆë¬´ ê¸¸ ë• <span class="tag-warn">ì‘ë‹µì„±ì´ ì €í•˜</span>ë˜ë¯€ë¡œ
          ì ì ˆí•œ Quantum ì„ íƒì´ í•µì‹¬
        </td>
      </tr>
      </tbody>
    </table>
  </section>

  <!-- í•˜ë‹¨: ì§ì ‘ ë¹„êµ -->
  <h2 class="section-title">ì§ì ‘ ë¹„êµí•˜ê¸°</h2>
  <p class="section-desc">
    í”„ë¡œì„¸ìŠ¤ì˜ ì¢…ë¥˜ë¥¼ ì„ íƒí•˜ê³ , ë¹„êµí•˜ê³  ì‹¶ì€ ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí•´ ë‘ ì•Œê³ ë¦¬ì¦˜ì„ ì§ê´€ì ìœ¼ë¡œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  </p>

  <div class="panel" style="margin-bottom:0">
    <div class="scenario-row">
      <div class="scenario-row-left">
        <strong> ì˜ˆì‹œ ì‹œë‚˜ë¦¬ì˜¤ ì„ íƒ - - - - - </strong>
      </div>
      <div>
        <select name="scenario" id="scenario-select">
          <option value="A">Preset A â€“ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ ë™ì‹œì— ë„ì°©</option>
          <option value="B">Preset B â€“ ë„ì°© ì‹œê°„ì´ ì„œë¡œ ë‹¤ë¥¸ 4ê°œ í”„ë¡œì„¸ìŠ¤</option>
          <option value="C">Preset C â€“ ê¸°ì•„ ê°€ëŠ¥ì„±ì´ ìˆëŠ” Priority ìƒí™©</option>
        </select>
      </div>
    </div>

    <div class="compare-grid">
      <!-- ì™¼ìª½ ì•Œê³ ë¦¬ì¦˜ -->
      <div class="compare-card">
        <div class="compare-header">
          <div>
            <div class="compare-title">ì„ íƒ ì•Œê³ ë¦¬ì¦˜ - 1</div>
          </div>
          <div>
            <div class="mini-label">ì•Œê³ ë¦¬ì¦˜ ì„ íƒ</div>
            <select name="alg1" id="alg1-select">
              <option value="FCFS">FCFS</option>
              <option value="SJF">SJF</option>
              <option value="PRIORITY">Priority</option>
              <option value="RR">Round Robin</option>
            </select>
          </div>
        </div>

        <div>
          <div class="mini-label">í•µì‹¬ ì§€í‘œ (ì˜ˆ: ì„ íƒëœ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ì¤€)</div>
          <table class="metric-table">
            <tr>
              <th>í‰ê·  ëŒ€ê¸° ì‹œê°„ (WT)</th>
              <td id="alg1-wt" class="placeholder">ê²°ê³¼ë¥¼ ì‹¤í–‰í•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤</td>
            </tr>
            <tr>
              <th>í‰ê·  ë°˜í™˜ ì‹œê°„ (TAT)</th>
              <td id="alg1-tat" class="placeholder">-</td>
            </tr>
            <tr>
              <th>í‰ê·  ì‘ë‹µ ì‹œê°„ (RT)</th>
              <td id="alg1-rt" class="placeholder">-</td>
            </tr>
            <tr>
              <th>Throughput</th>
              <td id="alg1-throughput" class="placeholder">-</td>
            </tr>
            <tr>
              <th>Starvation</th>
              <td id="alg1-starvation" class="placeholder">-</td>
            </tr>
          </table>
        </div>

        <div>
          <div class="mini-label">Gantt Chart</div>
          <div class="gantt-box" id="alg1-gantt">
            ë¹„êµ ì‹¤í–‰ í›„ ê°„íŠ¸ ì°¨íŠ¸ ìš”ì•½ì´ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>

      <!-- ì˜¤ë¥¸ìª½ ì•Œê³ ë¦¬ì¦˜ -->
      <div class="compare-card">
        <div class="compare-header">
          <div>
            <div class="compare-title">ì„ íƒ ì•Œê³ ë¦¬ì¦˜ - 2</div>
            <div class="compare-meta">ì˜¤ë¥¸ìª½ì— ì„ íƒëœ ì•Œê³ ë¦¬ì¦˜ì˜ ê²°ê³¼</div>
          </div>
          <div>
            <div class="mini-label">ì•Œê³ ë¦¬ì¦˜ ì„ íƒ</div>
            <select name="alg2" id="alg2-select">
              <option value="FCFS">FCFS</option>
              <option value="SJF">SJF</option>
              <option value="PRIORITY">Priority</option>
              <option value="RR">Round Robin</option>
            </select>
          </div>
        </div>

        <div>
          <div class="mini-label">í•µì‹¬ ì§€í‘œ (ì˜ˆ: ì„ íƒëœ ì‹œë‚˜ë¦¬ì˜¤ ê¸°ì¤€)</div>
          <table class="metric-table">
            <tr>
              <th>í‰ê·  ëŒ€ê¸° ì‹œê°„ (WT)</th>
              <td id="alg2-wt" class="placeholder">ê²°ê³¼ë¥¼ ì‹¤í–‰í•˜ë©´ í‘œì‹œë©ë‹ˆë‹¤</td>
            </tr>
            <tr>
              <th>í‰ê·  ë°˜í™˜ ì‹œê°„ (TAT)</th>
              <td id="alg2-tat" class="placeholder">-</td>
            </tr>
            <tr>
              <th>í‰ê·  ì‘ë‹µ ì‹œê°„ (RT)</th>
              <td id="alg2-rt" class="placeholder">-</td>
            </tr>
            <tr>
              <th>Throughput</th>
              <td id="alg2-throughput" class="placeholder">-</td>
            </tr>
            <tr>
              <th>Starvation</th>
              <td id="alg2-starvation" class="placeholder">-</td>
            </tr>
          </table>
        </div>

        <div>
          <div class="mini-label">Gantt Chart</div>
          <div class="gantt-box" id="alg2-gantt">
            ë¹„êµ ì‹¤í–‰ í›„ ê°„íŠ¸ ì°¨íŠ¸ ìš”ì•½ì´ í‘œì‹œë©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>

    <div class="comment-panel" id="insight-panel">
      <strong>Comparison Insight</strong><br/><br>
      <span id="insight-text">
        ì•Œê³ ë¦¬ì¦˜ ë¹„êµ í›„ ë™ì¼í•œ ì¡°ê±´ì—ì„œ ì™œ ì„œë¡œ ë‹¤ë¥¸ ì‹¤í–‰ íë¦„ê³¼ ì„±ëŠ¥ì„ ë³´ì´ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.
      </span>
    </div>

    <div class="btn-row">
      <button type="button" class="btn" id="run-compare-scheduling-btn">
        ë¹„êµ ì‹¤í–‰
      </button>
      <button type="button" class="btn" id="save-compare-scheduling-btn">
        ë¹„êµ ê²°ê³¼ ì €ì¥í•˜ê¸°
      </button>
    </div>
  </div>
</main>

<script>
  // --- ë¡œê·¸ì¸ / í”„ë¡œí•„ ë²„íŠ¼ + ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡ ---
  document.addEventListener('DOMContentLoaded', () => {
    // 1) ë¡œê·¸ì¸ ì²´í¬: ë¹„ë¡œê·¸ì¸ì´ë©´ ë¹„êµ í˜ì´ì§€ ì§„ì… ë§‰ê¸°
    const user = sessionStorage.getItem('user');
    if (!user || user.trim() === '') {
      alert('ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.');
      window.location.href = 'login.html';
      return;
    }

    // 2) ë¡œê·¸ì¸ëœ ìƒíƒœë©´ í”„ë¡œí•„ ì•„ì´ì½˜ ê³ ì •
    const container = document.getElementById('authArea');
    if (container) {
      container.innerHTML = `
        <button class="profile-btn" aria-label="My Page" title="My Page" onclick="location.href='mypage.html'">
          <svg viewBox="0 0 24 24" fill="black" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="8" r="4"></circle>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"></path>
          </svg>
        </button>
      `;
    }

    // 3) ë²„íŠ¼ ì´ë²¤íŠ¸ ë“±ë¡
    const saveBtn = document.getElementById('save-compare-scheduling-btn');
    if (saveBtn) {
      saveBtn.addEventListener('click', saveCompareSchedulingRecord);
    }

    const runBtn = document.getElementById('run-compare-scheduling-btn');
    if (runBtn) {
      runBtn.addEventListener('click', runCompareScheduling);
    }
  });

  // --- Preset ì‹œë‚˜ë¦¬ì˜¤ ì •ì˜ ---
  function getPresetProcesses(scenarioId) {
    // SchedulingReq.Proc í˜•ì‹: { pid, arrival, burst }
    switch (scenarioId) {
      case 'A':
        return [
          { pid: 'P1', arrival: 0, burst: 5 },
          { pid: 'P2', arrival: 0, burst: 3 },
          { pid: 'P3', arrival: 0, burst: 8 },
          { pid: 'P4', arrival: 0, burst: 6 }
        ];
      case 'B':
        return [
          { pid: 'P1', arrival: 0,  burst: 10 },
          { pid: 'P2', arrival: 3,  burst: 4 },
          { pid: 'P3', arrival: 5,  burst: 2 },
          { pid: 'P4', arrival: 9,  burst: 6 }
        ];
      case 'C':
        return [
          { pid: 'P1', arrival: 0,  burst: 12 },
          { pid: 'P2', arrival: 1,  burst: 3 },
          { pid: 'P3', arrival: 2,  burst: 2 },
          { pid: 'P4', arrival: 4,  burst: 1 }
        ];
      default:
        return [];
    }
  }

  // --- /api/sim/scheduling í˜¸ì¶œ ---
  async function requestScheduling(algo, processes) {
    const body = {
      algo: algo,
      quantum: null,   // RRì´ ì•„ë‹Œ ê²½ìš°ì—ëŠ” null, ë°±ì—”ë“œì—ì„œ ê¸°ë³¸ ì²˜ë¦¬
      processes: processes
    };

    const res = await fetch('/api/sim/scheduling', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(body)
    });

    if (!res.ok) {
      throw new Error('ì„œë²„ ì˜¤ë¥˜: ' + res.status);
    }
    return await res.json(); // { gantt: [...], metrics: {...} }
  }

  // --- Throughput ê³„ì‚° (ê°„ë‹¨ ë²„ì „: í”„ë¡œì„¸ìŠ¤ ìˆ˜ / ë§ˆì§€ë§‰ ì¢…ë£Œ ì‹œê°„) ---
  function calcThroughput(gantt, procCount) {
    if (!gantt || gantt.length === 0) return '-';
    const last = gantt[gantt.length - 1];
    const totalTime = last.end;
    if (!totalTime || totalTime <= 0) return '-';
    return (procCount / totalTime).toFixed(3) + ' proc / unit';
  }

  // --- Starvation ì„¤ëª… í…ìŠ¤íŠ¸ (ì•Œê³ ë¦¬ì¦˜ ì´ë¦„ ê¸°ì¤€) ---
  function getStarvationText(algo) {
    const upper = (algo || '').toUpperCase();
    if (upper === 'FCFS' || upper === 'RR') {
      return 'ì‹œë‚˜ë¦¬ì˜¤ ê¸°ì¤€, ê¸°ì•„ ê°€ëŠ¥ì„± ë‚®ìŒ';
    }
    if (upper === 'SJF' || upper === 'PRIORITY') {
      return 'ê¸´ ì‘ì—… / ë‚®ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ì˜ ê¸°ì•„ ê°€ëŠ¥ì„± ìˆìŒ';
    }
    return '-';
  }

  // --- Gantt ìš”ì•½ ë¬¸ìì—´ ë§Œë“¤ê¸° ---
  function formatGantt(gantt) {
    if (!gantt || gantt.length === 0) {
      return 'ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.';
    }
    return gantt
      .map(seg => `${seg.pid} [${seg.start}~${seg.end}]`)
      .join('  â†’  ');
  }

  // --- ì™¼ìª½/ì˜¤ë¥¸ìª½ ì¹´ë“œì— ê²°ê³¼ ë Œë”ë§ ---
  function renderAlgResult(side, algo, data, procCount) {
    const metrics = data.metrics || {};
    const gantt = data.gantt || [];

    const prefix = side === 'left' ? 'alg1' : 'alg2';

    const wtEl = document.getElementById(prefix + '-wt');
    const tatEl = document.getElementById(prefix + '-tat');
    const rtEl = document.getElementById(prefix + '-rt');
    const thEl = document.getElementById(prefix + '-throughput');
    const stEl = document.getElementById(prefix + '-starvation');
    const gEl = document.getElementById(prefix + '-gantt');

    if (!wtEl || !tatEl || !rtEl || !thEl || !stEl || !gEl) return;

    wtEl.textContent = (metrics.avgWaiting ?? '-');
    tatEl.textContent = (metrics.avgTurnaround ?? '-');
    rtEl.textContent = (metrics.avgResponse ?? '-');
    thEl.textContent = calcThroughput(gantt, procCount);
    stEl.textContent = getStarvationText(algo);

    renderMiniGantt(prefix + '-gantt', gantt);


    wtEl.classList.remove('placeholder');
    tatEl.classList.remove('placeholder');
    rtEl.classList.remove('placeholder');
    thEl.classList.remove('placeholder');
    stEl.classList.remove('placeholder');
  }

  // ========================
  //   ì½”ë©˜íŠ¸(Comparison Insight) ë¡œì§
  // ========================

  // ì•Œê³ ë¦¬ì¦˜ ìŒì„ ì •ê·œí™”í•´ì„œ key ë§Œë“¤ê¸° (ìˆœì„œ ìƒê´€ X)
  function makePairKey(a, b) {
    const arr = [(a || '').toUpperCase(), (b || '').toUpperCase()].sort();
    return arr.join('-');
  }

  // 1) ê¸°ë³¸ ì½”ë©˜íŠ¸ (ì‹œë‚˜ë¦¬ì˜¤ì™€ ë¬´ê´€í•œ êµ¬ì¡°ì  ì°¨ì´)
  const baseCommentMap = {
    'FCFS-SJF':
      'SJFëŠ” CPU burstê°€ ì§§ì€ ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰í•´ì„œ í‰ê·  ëŒ€ê¸°Â·ë°˜í™˜ ì‹œê°„ì´ ìœ ë¦¬í•œ ëŒ€ì‹ , ê¸´ ì‘ì—…ì´ ê³„ì† ë’¤ë¡œ ë°€ë ¤ ê¸°ì•„ ìœ„í—˜ì´ ìƒê¹ë‹ˆë‹¤. FCFSëŠ” ë„ì°© ìˆœì„œë§Œ ë”°ë¥´ê¸° ë•Œë¬¸ì— êµ¬í˜„ì´ ë‹¨ìˆœí•˜ê³  ê¸°ì•„ëŠ” ì—†ì§€ë§Œ, ê¸´ ì‘ì—… í•˜ë‚˜ ë•Œë¬¸ì— ë’¤ì— ì˜¨ ì§§ì€ ì‘ì—…ë“¤ì´ ì˜¤ë˜ ë¬¶ì´ëŠ” Convoy effectê°€ ìì£¼ ë°œìƒí•©ë‹ˆë‹¤.',
    'FCFS-RR':
      'RRì€ Time Quantum ë‹¨ìœ„ë¡œ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì—ê²Œ CPUë¥¼ ì¡°ê¸ˆì”© ëŒë ¤ ì¤˜ì„œ ì‘ë‹µì„±ì´ ì¢‹ê³  ê³µì •í•˜ì§€ë§Œ, Context Switching ì˜¤ë²„í—¤ë“œê°€ ëŠ˜ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤. FCFSëŠ” í•œ ë²ˆ CPUë¥¼ ì¡ìœ¼ë©´ ëê¹Œì§€ ì“°ëŠ” ëŒ€ì‹  ë’¤ì— ìˆëŠ” ì‘ì—…ì€ ì²˜ìŒë¶€í„° ëê¹Œì§€ ê¸°ë‹¤ë ¤ì•¼ í•´ì„œ ì‘ë‹µ ì‹œê°„ ë©´ì—ì„œ ë¶ˆë¦¬í•˜ì§€ë§Œ, ì˜¤ë²„í—¤ë“œëŠ” ê±°ì˜ ì—†ìŠµë‹ˆë‹¤.',
    'FCFS-PRIORITY':
      'PriorityëŠ” ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì‘ì—…ì— CPUë¥¼ ë¨¼ì € ë°°ë¶„í•´ ì¤‘ìš” ì‘ì—…ì„ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆì§€ë§Œ, ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì‘ì—…ì€ ì˜¤ë«ë™ì•ˆ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê¸°ì•„ê°€ ì‰½ê²Œ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. FCFSëŠ” ì •ì±… ì œì–´ë ¥ì€ ì—†ì§€ë§Œ ë„ì°© ìˆœì„œëŒ€ë¡œë§Œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ì ì–´ë„ ëª¨ë“  ì‘ì—…ì´ ì–¸ì  ê°€ëŠ” ì‹¤í–‰ëœë‹¤ëŠ” ì ì—ì„œ ê¸°ì•„ëŠ” ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.',
    'RR-SJF':
      'SJFëŠ” ì§§ì€ ì‘ì—…ì„ ìš°ì„  ì²˜ë¦¬í•´ í‰ê·  ëŒ€ê¸°Â·ë°˜í™˜ ì‹œê°„ì„ ìµœì†Œí™”í•˜ëŠ” ë° ê°•ì ì´ ìˆì§€ë§Œ, ê¸´ ì‘ì—…ì€ ê³„ì† ë’¤ë¡œ ë°€ë ¤ ê¸°ì•„ì— ì·¨ì•½í•©ë‹ˆë‹¤. RRì€ burst ê¸¸ê³¼ ìƒê´€ ì—†ì´ ëª¨ë“  ì‘ì—…ì´ Time Quantumë§ˆë‹¤ ì¡°ê¸ˆì”© CPUë¥¼ ê°€ì ¸ê°€ ê³µì •í•˜ê³  ì‘ë‹µì„±ì´ ì¢‹ì§€ë§Œ, í‰ê·  ì‹œê°„ ì§€í‘œëŠ” SJFë³´ë‹¤ ë‚˜ìœ ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤.',
    'PRIORITY-SJF':
      'SJFëŠ” CPU burst ê¸¸ì´ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì§§ì€ ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰í•˜ê³ , PriorityëŠ” ìš°ì„ ìˆœìœ„ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì¤‘ìš”í•œ ì‘ì—…ì„ ë¨¼ì € ì‹¤í–‰í•©ë‹ˆë‹¤. ë‘˜ ë‹¤ íŠ¹ì • ì‘ì—…ì„ ìš°ëŒ€í•˜ëŠ” í¸í–¥ì´ ìˆì§€ë§Œ, PriorityëŠ” ì¤‘ìš”í•˜ì§€ë§Œ ê¸´ ì‘ì—…ë„ ë¨¼ì € ì²˜ë¦¬í•  ìˆ˜ ìˆê³ , SJFëŠ” ì§§ì€ ì‘ì—… ìœ„ì£¼ë¡œ í‰ê·  ì„±ëŠ¥ì„ ëŒì–´ì˜¬ë¦¬ëŠ” ëŒ€ì‹  ê¸´ ì‘ì—…ì´ ê³„ì† ë’¤ë¡œ ë°€ë¦´ ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤.',
    'PRIORITY-RR':
      'RRì€ ìš°ì„ ìˆœìœ„ë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  ëª¨ë“  ì‘ì—…ì— CPUë¥¼ ê· ë“±í•˜ê²Œ ë‚˜ëˆ„ì–´ ì£¼ê¸° ë•Œë¬¸ì— ê¸°ì•„ê°€ ê±°ì˜ ì—†ê³ , ì¸í„°ë™í‹°ë¸Œ í™˜ê²½ì—ì„œ ì‘ë‹µì„±ì´ ì¢‹ìŠµë‹ˆë‹¤. PriorityëŠ” ì¤‘ìš”í•œ ì‘ì—…ì— CPUë¥¼ ëª°ì•„ ì¤„ ìˆ˜ ìˆëŠ” ëŒ€ì‹  ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ ì‘ì—…ì€ ì‚¬ì‹¤ìƒ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê¸°ì•„ê°€ ì‰½ê²Œ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¦‰ RRì€ ê³µì •ì„±ê³¼ ì‘ë‹µì„±, PriorityëŠ” ì¤‘ìš”ë„ ë°˜ì˜ê³¼ ì •ì±… ì œì–´ë ¥ì— ì´ˆì ì„ ë‘” êµ¬ì¡°ì…ë‹ˆë‹¤.'
  };

  // 2) ì‹œë‚˜ë¦¬ì˜¤ë³„ ê°•ì¡° í¬ì¸íŠ¸
  const scenarioCommentMap = {
    'A': { // ë™ì‹œ ë„ì°©
      'FCFS-SJF':
        'Preset Aì—ì„œëŠ” ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ë„ì°©í•˜ë¯€ë¡œ, ë„ì°© ìˆœì„œì™€ ìƒê´€ ì—†ì´ ë²„ìŠ¤íŠ¸ ê¸¸ì´ë¡œë§Œ ìˆœì„œë¥¼ ì •í•˜ëŠ” SJFì˜ ì¥ì ì´ ê°€ì¥ ë˜ë ·í•˜ê²Œ ë³´ì…ë‹ˆë‹¤. SJF ìª½ì—ì„œ í‰ê·  ëŒ€ê¸°Â·ë°˜í™˜ ì‹œê°„ì´ í¬ê²Œ ì¤„ì–´ë“œëŠ” ëŒ€ì‹ , ê°€ì¥ ê¸´ ì‘ì—… í•˜ë‚˜ëŠ” ê±°ì˜ ëê¹Œì§€ ë°€ë ¤ ëŒ€ê¸° ì‹œê°„ì´ í¬ê²Œ ëŠ˜ì–´ë‚˜ëŠ” íŒ¨í„´ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'FCFS-RR':
        'Preset Aì—ì„œ ê¸´ ì‘ì—…ì´ ì„ì—¬ ìˆì„ ë•Œ FCFSëŠ” ê¸´ ì‘ì—…ì´ ì•ì— ì˜¤ë©´ ë’¤ì— ìˆëŠ” ëª¨ë“  ì‘ì—…ì´ í•œ ë²ˆì— ë¬¶ì—¬ ê¸°ë‹¤ë¦¬ëŠ” Convoy íŒ¨í„´ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. RRì€ ê¸´ ì‘ì—…ë„ ì˜ê²Œ ìª¼ê°œì„œ ëŒë ¤ ì£¼ê¸° ë•Œë¬¸ì— ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ì´ˆë°˜ì— í•œ ë²ˆì”© CPUë¥¼ ì¡ëŠ” ëŒ€ì‹ , ì „ì²´ ì™„ë£Œ ì‹œê°„ì€ ì•½ê°„ ëŠ˜ì–´ë‚  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'FCFS-PRIORITY':
        'Preset Aì—ì„œëŠ” Priorityê°€ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ë™ì‹œì— ì¤„ ì„œ ìˆëŠ” ìƒíƒœì—ì„œ ìš°ì„ ìˆœìœ„ê°€ ë†’ì€ ì‘ì—…ì„ ë¨¼ì € ëª°ì•„ì„œ ì²˜ë¦¬í•˜ëŠ” ëª¨ìŠµì´ ëšœë ·í•˜ê²Œ ë“œëŸ¬ë‚©ë‹ˆë‹¤. ê°™ì€ ì…ë ¥ì—ì„œ FCFSëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ì™„ì „íˆ ë¬´ì‹œí•˜ê³  ë„ì°© ìˆœì„œëŒ€ë¡œë§Œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, ì¤‘ìš”í•˜ì§€ë§Œ ëŠ¦ê²Œ ë„ì°©í•œ ì‘ì—…ì´ ë’¤ë¡œ ë°€ë ¤ ìˆëŠ” ëŒ€ë¹„ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'RR-SJF':
        'Preset Aì—ì„œëŠ” ì§§ì€ ì‘ì—… ë¹„ì¤‘ì´ í´ìˆ˜ë¡ SJFê°€ í‰ê·  ëŒ€ê¸°Â·ë°˜í™˜ ì‹œê°„ì—ì„œ RRì„ í¬ê²Œ ì´ê¸°ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. ë°˜ëŒ€ë¡œ RRì€ ëª¨ë“  ì‘ì—…ì´ ì´ˆë°˜ì— í•œ ë²ˆì”© CPUë¥¼ ë°›ê¸° ë•Œë¬¸ì—, í‰ê·  ì§€í‘œì—ì„œëŠ” ì†í•´ë¥¼ ë³´ë”ë¼ë„ â€œëª¨ë‘ê°€ ì¡°ê¸ˆì”© ëŒì•„ê°„ë‹¤â€ëŠ” ê³µì •ì„±ì´ ì˜ ë“œëŸ¬ë‚©ë‹ˆë‹¤.',
      'PRIORITY-SJF':
        'Preset Aì—ì„œ Priorityì˜ ìš°ì„ ìˆœìœ„ ì„¤ì •ì´ burst ê¸¸ì´ì™€ ì–¼ë§ˆë‚˜ ì¼ì¹˜í•˜ëŠëƒì— ë”°ë¼, ê²°ê³¼ê°€ SJFì™€ ë¹„ìŠ·í•´ì§€ê¸°ë„ í•˜ê³  ì™„ì „íˆ ë‹¬ë¼ì§€ê¸°ë„ í•©ë‹ˆë‹¤. ì§§ì€ ì‘ì—…ì— ë†’ì€ priorityë¥¼ ì£¼ë©´ ë‘ ì•Œê³ ë¦¬ì¦˜ì´ ìœ ì‚¬í•˜ê²Œ ë³´ì´ê³ , ê¸´ ì‘ì—…ì— ë†’ì€ priorityë¥¼ ì£¼ë©´ Priority ìª½ì´ SJFì™€ ì •ë°˜ëŒ€ì˜ ìˆœì„œë¥¼ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤.',
      'PRIORITY-RR':
        'Preset Aì—ì„œëŠ” RRì´ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ì— ê· ë“±í•˜ê²Œ CPUë¥¼ ë‚˜ëˆ  ì£¼ëŠ” ë°˜ë©´, PriorityëŠ” ë†’ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ì„ ë¨¼ì € ëª°ì•„ì„œ ëë‚´ëŠ” íŒ¨í„´ì´ ëšœë ·í•˜ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œë„ RRì€ â€œëª¨ë‘ê°€ ì¡°ê¸ˆì”© ë‚˜ì•„ê°€ëŠ” ê·¸ë¦¼â€, PriorityëŠ” â€œëª‡ ê°œì˜ ì¤‘ìš”í•œ ì‘ì—…ì´ ë¨¼ì € ë‹¤ ëë‚˜ëŠ” ê·¸ë¦¼â€ìœ¼ë¡œ ëŒ€ë¹„ë©ë‹ˆë‹¤.'
    },
    'B': { // ë„ì°© ì‹œê°„ ì„œë¡œ ë‹¤ë¦„
      'FCFS-SJF':
        'Preset Bì²˜ëŸ¼ ë„ì°© ì‹œê°„ì´ ì—‡ê°ˆë¦¬ëŠ” ìƒí™©ì—ì„œëŠ”, FCFSê°€ ë¨¼ì € ë„ì°©í•œ ê¸´ ì‘ì—…ì„ ì˜¤ë˜ ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ ë‚˜ì¤‘ì— ì˜¨ ì§§ì€ ì‘ì—…ì´ ë’¤ì—ì„œ ì¤„ë§Œ ì„œ ìˆëŠ” ë°˜ë©´, SJFëŠ” ë‚˜ì¤‘ì— ë„ì°©í–ˆë”ë¼ë„ ë” ì§§ì€ ì‘ì—…ì´ë©´ ì•ì— ë¼ì–´ë“¤ì–´ ë¨¼ì € ì‹¤í–‰ë˜ëŠ” ì°¨ì´ê°€ ëšœë ·í•˜ê²Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.',
      'FCFS-RR':
        'Preset Bì—ì„œëŠ” ê¸´ ì‘ì—…ì´ ë¨¼ì € ë„ì°©í•˜ê³  ì§§ì€ ì‘ì—…ì´ ë‚˜ì¤‘ì— ë“¤ì–´ì˜¬ ë•Œ, FCFSëŠ” ê¸´ ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ë’¤ì— ì˜¨ ì‘ì—…ì´ ì „í˜€ ì‹¤í–‰ ê¸°íšŒë¥¼ ëª» ë°›ëŠ” ê²½ìš°ê°€ ìƒê¹ë‹ˆë‹¤. RRì€ ê¸´ ì‘ì—…ì´ ëŒê³  ìˆëŠ” ë™ì•ˆì—ë„ ë‚˜ì¤‘ì— ì˜¨ ì‘ì—…ë“¤ì´ time sliceë§ˆë‹¤ ì¡°ê¸ˆì”© CPUë¥¼ ë°›ê¸° ë•Œë¬¸ì—, ì‘ë‹µ ì‹œê°„ê³¼ ê³µì •ì„± ì¸¡ë©´ì—ì„œ ì°¨ì´ê°€ í¬ê²Œ ë²Œì–´ì§‘ë‹ˆë‹¤.',
      'FCFS-PRIORITY':
        'Preset Bì²˜ëŸ¼ ë„ì°© ì‹œê°„ì´ ì„ì—¬ ìˆì„ ë•Œ PriorityëŠ” ì¤‘ìš”í•œ ì‘ì—…ì´ ëŠ¦ê²Œ ë„ì°©í•´ë„ ë„ì°© ì‹œì ë¶€í„° ê¸°ì¡´ ë‚®ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ë³´ë‹¤ ë¨¼ì € CPUë¥¼ ëºì–´ ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ìƒí™©ì—ì„œë„ FCFSëŠ” ë„ì°© ìˆœì„œë§Œ ë³´ê¸° ë•Œë¬¸ì—, ì¤‘ìš”í•œ ì‘ì—…ì´ ë‚˜ì¤‘ì— ì˜¤ë©´ ì‹¤ì œ ì¤‘ìš”ë„ì™€ ìƒê´€ ì—†ì´ ë’¤ì—ì„œ ì˜¤ë˜ ê¸°ë‹¤ë¦¬ê²Œ ë©ë‹ˆë‹¤.',
      'RR-SJF':
        'Preset Bì—ì„œëŠ” ìƒˆë¡œ ë„ì°©í•˜ëŠ” ì§§ì€ ì‘ì—…ì´ ìˆì„ ë•Œ, SJFëŠ” ê¸°ì¡´ì˜ ê¸´ ì‘ì—…ì„ ê³„ì† ë’¤ë¡œ ë°€ì–´ ë‚´ê³  ì§§ì€ ì‘ì—…ë¶€í„° ì²˜ë¦¬í•´ í‰ê·  ëŒ€ê¸°Â·ë°˜í™˜ ì‹œê°„ì„ ë‚®ì¶¥ë‹ˆë‹¤. RRì€ ë„ì°©í•œ ìˆœì„œëŒ€ë¡œ íì— ë“¤ì–´ê°„ ë’¤ time sliceë¡œ ëŒê¸° ë•Œë¬¸ì— ì™„ì „íˆ â€œì§§ì€ ì‘ì—… ìš°ì„ â€ì´ ë˜ì§€ëŠ” ì•Šì§€ë§Œ, ëŒ€ì‹  ëª¨ë“  ì‘ì—…ì´ ë¹„êµì  ë¹ ë¥´ê²Œ ì²« ì‹¤í–‰ ê¸°íšŒë¥¼ ì–»ëŠ” ê³µì •ì„±ì´ ìœ ì§€ë©ë‹ˆë‹¤.',
      'PRIORITY-SJF':
        'Preset Bì—ì„œëŠ” ë„ì°© ì‹œê°„ì´ ì„ì´ë©´ì„œ, ì§§ìœ¼ë©´ì„œ ìš°ì„ ìˆœìœ„ë„ ë†’ì€ ì‘ì—…ì€ ë‘ ì•Œê³ ë¦¬ì¦˜ ëª¨ë‘ ë¹ ë¥´ê²Œ ì²˜ë¦¬í•˜ì§€ë§Œ, ì§§ì§€ë§Œ ìš°ì„ ìˆœìœ„ê°€ ë‚®ê±°ë‚˜ ê¸¸ì§€ë§Œ ìš°ì„ ìˆœìœ„ê°€ ë§¤ìš° ë†’ì€ ì‘ì—…ì—ì„œëŠ” ë‘ ì•Œê³ ë¦¬ì¦˜ì˜ ì‹¤í–‰ ìˆœì„œê°€ í¬ê²Œ ê°ˆë¦½ë‹ˆë‹¤. ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œë„ â€œburst ê¸°ì¤€ í¸í–¥(SJF)â€ê³¼ â€œìš°ì„ ìˆœìœ„ ê¸°ì¤€ í¸í–¥(Priority)â€ì˜ ì°¨ì´ê°€ ëª…í™•í•´ì§‘ë‹ˆë‹¤.',
      'PRIORITY-RR':
        'Preset Bì—ì„œ ìƒˆë¡œ ë„ì°©í•˜ëŠ” ì‘ì—…ì´ ë§ì„ìˆ˜ë¡, RRì€ ë„ì°©ë§Œ í•˜ë©´ ê³§ í•œ ë²ˆì”© CPUë¥¼ ë§›ë³´ê²Œ ë˜ëŠ” ë°˜ë©´ PriorityëŠ” ë‚®ì€ ìš°ì„ ìˆœìœ„ ì‘ì—…ì´ ê³„ì† ë’¤ë¡œ ë°€ë ¤ ì‹¤í–‰ ê¸°íšŒë¥¼ ê±°ì˜ ì–»ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ ìì£¼ ìƒê¹ë‹ˆë‹¤. ì‚¬ìš©ì ì…ì¥ì—ì„œëŠ” RR ìª½ì´ â€œì¼ë‹¨ í•œ ë²ˆì´ë¼ë„ ëŒì•„ê°”ë‹¤â€ëŠ” ì‘ë‹µì„±ì´ í›¨ì”¬ ì˜ ëŠê»´ì§‘ë‹ˆë‹¤.'
    },
    'C': { // Priority ê¸°ì•„ ìƒí™©
      'FCFS-SJF':
        'Preset CëŠ” priority ê¸°ë°˜ ê¸°ì•„ ìƒí™©ì„ ë³´ì—¬ ì£¼ê¸° ìœ„í•œ ì‹œë‚˜ë¦¬ì˜¤ì§€ë§Œ, ê°™ì€ ì…ë ¥ì—ì„œë„ SJFëŠ” ê¸´ ì‘ì—…ì„ ëê¹Œì§€ ë’¤ë¡œ ë¯¸ë£¨ë©´ì„œ ë˜ ë‹¤ë¥¸ í˜•íƒœì˜ ê¸°ì•„ë¥¼ ë§Œë“œëŠ” ë°˜ë©´ FCFSëŠ” ë„ì°© ìˆœì„œë§Œ ë”°ë¥´ê¸° ë•Œë¬¸ì— ì¼ì° ë„ì°©í•œ ê¸´ ì‘ì—…ì´ë¼ë©´ ì–¸ì  ê°€ëŠ” ì‹¤í–‰ë˜ëŠ” ë‹¨ìˆœí•œ ê³µì •ì„±ì„ ë³´ì—¬ ì¤ë‹ˆë‹¤.',
      'FCFS-PRIORITY':
        'Preset Cì—ì„œëŠ” Priorityê°€ ë‚®ì€ ìš°ì„ ìˆœìœ„ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ì˜ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ì „í˜•ì ì¸ ê¸°ì•„ ì˜ˆì‹œë¡œ ë™ì‘í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ê°™ì€ ì…ë ¥ì—ì„œ FCFSëŠ” ìš°ì„ ìˆœìœ„ë¥¼ ì „í˜€ ê³ ë ¤í•˜ì§€ ì•Šê³  ë„ì°© ìˆœì„œëŒ€ë¡œ ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸ì—, â€œê¸°ì•„ê°€ ë°œìƒí•˜ëŠ” Priorityâ€ì™€ â€œê¸°ì•„ê°€ ì—†ëŠ” FCFSâ€ì˜ ëŒ€ë¹„ê°€ ê°€ì¥ ê·¹ì ìœ¼ë¡œ ë“œëŸ¬ë‚©ë‹ˆë‹¤.',
      'RR-SJF':
        'Preset Cì—ì„œë„ SJFëŠ” ì§§ì€ ì‘ì—… ìœ„ì£¼ë¡œ CPUë¥¼ ë°°ë¶„í•˜ë©´ì„œ ê¸¸ê²Œ ëŒì•„ì•¼ í•˜ëŠ” ì‘ì—…ì„ ê³„ì† ë’¤ë¡œ ë°€ì–´ ê¸°ì•„ ìœ„í—˜ì„ ë§Œë“­ë‹ˆë‹¤. RRì€ ê°™ì€ ì…ë ¥ì—ì„œë„ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ Time Quantumë§ˆë‹¤ CPUë¥¼ ì¡°ê¸ˆì”© ê°€ì ¸ê°€ë„ë¡ ë³´ì¥í•´, ìš°ì„ ìˆœìœ„ë¥¼ ì“°ì§€ ì•Šì•„ë„ ê¸°ì•„ ì—†ì´ ëª¨ë‘ê°€ ì¡°ê¸ˆì”© ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ëŠ” íŒ¨í„´ì„ ë³´ì—¬ ì¤ë‹ˆë‹¤.',
      'PRIORITY-SJF':
        'Preset Cì—ì„œëŠ” Priorityê°€ ìš°ì„ ìˆœìœ„ê°€ ë‚®ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ê±°ì˜ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ë°˜ë©´, SJFëŠ” burstê°€ ê¸´ í”„ë¡œì„¸ìŠ¤ë¥¼ ê³„ì† ë’¤ë¡œ ë¯¸ë£¨ëŠ” ë‹¤ë¥¸ í˜•íƒœì˜ ê¸°ì•„ë¥¼ ë§Œë“¤ì–´ ëƒ…ë‹ˆë‹¤. ë‘˜ ë‹¤ ê¸°ì•„ ìœ„í—˜ì´ ìˆì§€ë§Œ PriorityëŠ” â€œìš°ì„ ìˆœìœ„ ê°’â€, SJFëŠ” â€œCPU burst ê¸¸ì´â€ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ í¬ìƒì‹œí‚¤ëŠ” êµ¬ì¡°ë¼ëŠ” ì°¨ì´ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
      'PRIORITY-RR':
        'Preset Cì—ì„œëŠ” Priorityê°€ ë‚®ì€ ìš°ì„ ìˆœìœ„/ê¸´ ì‘ì—…ì„ ê±°ì˜ ì‹¤í–‰í•˜ì§€ ì•ŠëŠ” ì „í˜•ì ì¸ starvation ì‚¬ë¡€ë¥¼ ë§Œë“¤ê³ , ê°™ì€ ì…ë ¥ì„ RRë¡œ ëŒë¦¬ë©´ ëª¨ë“  í”„ë¡œì„¸ìŠ¤ê°€ ì£¼ê¸°ì ìœ¼ë¡œ CPUë¥¼ ë°›ìœ¼ë©° ì¡°ê¸ˆì”©ì´ë¼ë„ ì§„í–‰ë©ë‹ˆë‹¤. ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œ PriorityëŠ” ì¤‘ìš” ì‘ì—… ëª‡ ê°œì— CPUê°€ ì§‘ì¤‘ë˜ê³ , RRì€ ìš°ì„ ìˆœìœ„ë¥¼ ë¬´ì‹œí•˜ë”ë¼ë„ ê¸°ì•„ ì—†ì´ ê³µì •í•˜ê²Œ ë‚˜ëˆ„ì–´ ì£¼ëŠ” ëª¨ìŠµì„ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
    }
  };

  function getSchedulingComment(alg1, alg2, scenarioId) {
    const upperA = (alg1 || '').toUpperCase();
    const upperB = (alg2 || '').toUpperCase();

    // ê°™ì€ ì•Œê³ ë¦¬ì¦˜ ì„ íƒí–ˆì„ ë•Œ ì½”ë©˜íŠ¸
    if (upperA === upperB && upperA) {
      return `ë‘ ì¹´ë“œ ëª¨ë‘ <b>${upperA}</b> ì•Œê³ ë¦¬ì¦˜ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤.<br/>
ê°™ì€ í”„ë¡œì„¸ìŠ¤ ì§‘í•©ê³¼ ì‹œë‚˜ë¦¬ì˜¤ì—ì„œëŠ” ê°„íŠ¸ ì°¨íŠ¸ì™€ í‰ê·  ì§€í‘œê°€ ê±°ì˜ ë™ì¼í•˜ê²Œ ë‚˜ì˜¤ëŠ” ê²ƒì´ ì •ìƒì´ë©°,<br/>
ì´ í™”ë©´ì€ íŠ¹ì • ì•Œê³ ë¦¬ì¦˜ì˜ <b>ì ˆëŒ€ì ì¸ ì„±ëŠ¥</b>ì„ í™•ì¸í•˜ëŠ” ìš©ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
    }

    const pairKey = makePairKey(alg1, alg2);
    const base = baseCommentMap[pairKey];
    const scenarioMap = scenarioCommentMap[scenarioId];
    const scenarioComment = scenarioMap ? scenarioMap[pairKey] : null;

    if (!base && !scenarioComment) {
      return null;
    }
    if (!scenarioComment) {
      return base;
    }
    if (!base) {
      return scenarioComment;
    }
    // ë‘˜ ë‹¤ ìˆìœ¼ë©´ ê¸°ë³¸ ì½”ë©˜íŠ¸ + ì¤„ë°”ê¿ˆ + ì‹œë‚˜ë¦¬ì˜¤ ê°•ì¡°
    return base + '<br/><br/>' + scenarioComment;
  }

  function updateSchedulingComment(alg1, alg2, scenarioId) {
    const insightSpan = document.getElementById('insight-text');
    if (!insightSpan) return;

    const comment = getSchedulingComment(alg1, alg2, scenarioId);
    if (!comment) {
      insightSpan.innerHTML =
        'ì•Œê³ ë¦¬ì¦˜ ë¹„êµ í›„ ë™ì¼í•œ ì¡°ê±´ì—ì„œ ì™œ ì„œë¡œ ë‹¤ë¥¸ ì‹¤í–‰ íë¦„ê³¼ ì„±ëŠ¥ì„ ë³´ì´ëŠ”ì§€ ì„¤ëª…í•©ë‹ˆë‹¤.';
      return;
    }
    insightSpan.innerHTML = comment;
  }

  // --- â€œë¹„êµ ì‹¤í–‰â€ ë²„íŠ¼ ë¡œì§ ---
  async function runCompareScheduling() {
    const scenarioSelect = document.getElementById('scenario-select');
    const alg1Select = document.getElementById('alg1-select');
    const alg2Select = document.getElementById('alg2-select');

    if (!scenarioSelect || !alg1Select || !alg2Select) {
      alert('ì„ íƒ ì •ë³´ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    const scenarioId = scenarioSelect.value;
    const processes = getPresetProcesses(scenarioId);

    if (!processes || processes.length === 0) {
      alert('ì„ íƒëœ ì‹œë‚˜ë¦¬ì˜¤ì— í”„ë¡œì„¸ìŠ¤ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }

    const alg1 = alg1Select.value;
    const alg2 = alg2Select.value;

    try {
      // ë‘ ì•Œê³ ë¦¬ì¦˜ì„ ê°™ì€ ì‹œë‚˜ë¦¬ì˜¤ë¡œ ë³‘ë ¬ ì‹¤í–‰
      const [res1, res2] = await Promise.all([
        requestScheduling(alg1, processes),
        requestScheduling(alg2, processes)
      ]);

      renderAlgResult('left', alg1, res1, processes.length);
      renderAlgResult('right', alg2, res2, processes.length);

      // ì½”ë©˜íŠ¸ ì˜ì—­ ì—…ë°ì´íŠ¸ (Comparison Insight)
      updateSchedulingComment(alg1, alg2, scenarioId);
    } catch (e) {
      console.error(e);
      alert('ë¹„êµ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  }

  // --- ë¹„êµ ê²°ê³¼ ì €ì¥ í•¨ìˆ˜ ---
  async function saveCompareSchedulingRecord() {
    const scenarioSelect = document.getElementById('scenario-select');
    const alg1Select = document.getElementById('alg1-select');
    const alg2Select = document.getElementById('alg2-select');

    if (!scenarioSelect || !alg1Select || !alg2Select) {
      alert('ì„ íƒ ì •ë³´ë¥¼ ì½ì–´ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      return;
    }
    // ğŸ” ì €ì¥ ì‹œì—ë„ í•œ ë²ˆ ë” ë¡œê·¸ì¸ í™•ì¸
    const user = sessionStorage.getItem('user');
    if (!user || user.trim() === '') {
      alert('ë¡œê·¸ì¸ì´ í•„ìš”í•œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.');
      window.location.href = 'login.html';
      return;
    }

    const scenario = scenarioSelect.value;
    const scenarioLabel = scenarioSelect.options[scenarioSelect.selectedIndex].text;

    const alg1 = alg1Select.value;
    const alg1Label = alg1Select.options[alg1Select.selectedIndex].text;

    const alg2 = alg2Select.value;
    const alg2Label = alg2Select.options[alg2Select.selectedIndex].text;

    const insightSpan = document.getElementById('insight-text');
    const insightText = insightSpan ? insightSpan.innerText : '';

    const payload = {
      type: 'compare-scheduling',
      title: `CPU Scheduling ë¹„êµ (${alg1Label} vs ${alg2Label})`,
      scenario,
      scenarioLabel,
      alg1,
      alg1Label,
      alg2,
      alg2Label,
      insight: insightText
      // ë‚˜ì¤‘ì— ì§€í‘œ/ê°„íŠ¸ì°¨íŠ¸ê¹Œì§€ ì €ì¥í•˜ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸° í•„ë“œë¥¼ í™•ì¥í•˜ë©´ ë¨
    };

    try {
      const res = await fetch('/api/records', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });

      if (!res.ok) {
        throw new Error('status ' + res.status);
      }

      alert('ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤. ë§ˆì´í˜ì´ì§€ì—ì„œ í™•ì¸í•˜ì„¸ìš”.');
    } catch (e) {
      console.error(e);
      alert('ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
  }

  // ì¶•ì†Œí˜• ë§‰ëŒ€í˜• ê°„íŠ¸ì°¨íŠ¸ ë Œë”ë§
  function renderMiniGantt(containerId, gantt) {
    const box = document.getElementById(containerId);
    if (!box) return;

    box.innerHTML = "";  // ì´ˆê¸°í™”
    box.style.textAlign = "left";

    if (!gantt || gantt.length === 0) {
      box.textContent = "ì‹œë®¬ë ˆì´ì…˜ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤.";
      return;
    }

    // ì „ì²´ ê¸¸ì´ ê³„ì‚° (ë§‰ëŒ€ ê¸¸ì´ ë¹„ìœ¨)
    const maxEnd = gantt[gantt.length - 1].end;
    const scale = 450 / maxEnd;  // ì „ì²´ í­ 160px ê¸°ì¤€ (ì¶•ì†Œí˜•)

    const wrap = document.createElement('div');
    wrap.className = "mini-gantt";

    gantt.forEach(seg => {
      const bar = document.createElement('div');
      bar.className = "mini-gantt-bar";

      // ë§‰ëŒ€ ê¸¸ì´ ê³„ì‚°
      const width = (seg.end - seg.start) * scale;
      bar.style.width = width + "px";

      // ìƒ‰ìƒ â†’ sim-schedulingê³¼ ë™ì¼í•˜ê²Œ PID ê¸°ë°˜ ìƒ‰ìƒ ìœ ì§€
      bar.style.background = getPidColor(seg.pid);

      // PID + ì‹œê°„ í‘œì‹œ
      const label = document.createElement('span');
      label.textContent = seg.pid;

      bar.appendChild(label);
      wrap.appendChild(bar);
    });

    box.appendChild(wrap);
  }

  // sim-schedulingê³¼ ë™ì¼í•œ PID ìƒ‰ìƒ ë§¤í•‘
  function getPidColor(pid) {
    // PIDë¥¼ ìˆ«ìë¡œ ì¹˜í™˜í•´ë„ ë˜ê³ , í•´ì‹œ ê¸°ë°˜ë„ ê°€ëŠ¥ â€” ì—¬ê¸°ì„  ë‹¨ìˆœ ë§¤í•‘
    const map = {
      "P1": "#4da3ff",
      "P2": "#ff7a7a",
      "P3": "#7aff90",
      "P4": "#ffdd66",
      "P5": "#c57aff"
    };
    return map[pid] || "#888";
  }

  </script>

</body>
</html>

